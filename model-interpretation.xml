<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE article SYSTEM "-//OASIS//DTD DocBook XML">
<section>
  <title>Interpretation of CellML models</title>
  <section>
    <title>Component reference</title>
    <orderedlist>
      <listitem>
        <para>
          A component reference SHALL be the name of a component, and SHALL be
          interpreted based on the context within the CellML Model in which it occurs.
        </para>
      </listitem>
      <listitem>
        <para>
          A component reference present in an information item which is a
          descendant of a model element SHALL be identical to either the name
          attribute on a component element or to the name attribute on an import
          component element.
        </para>
      </listitem>
      <listitem>
        <para>
          A component reference which is identical to the name attribute on a
          component element SHALL be treated as a reference to that component
          element.
        </para>
      </listitem>
      <listitem>
        <para>
          A component reference which is identical to the name attribute on an
          import component element SHALL be treated as if the component reference
          appeared in the imported model, and referred to the name specified in
          the component_ref attribute of the import component element.
        </para>
      </listitem>
      <listitem>
        <para>
          It is noted for the avoidance of doubt that CellML Models MAY apply
          the previous rule recursively, to reference an import component element
          which in turn references another import component element.
        </para>
      </listitem>
    </orderedlist>
  </section>
  <section>
    <title>Variable reference</title>
    <orderedlist>
      <listitem>
        <para>
          For any given variable reference, only the first applicable rule from the following three rules SHALL be used to interpret a variable reference.
        </para>
      </listitem>
      <listitem>
        <para>
          Where a variable reference is equal to a value in the name column of of a row in the table <xref linkend="variables-table" />, then the variable reference SHALL be a reference to the built in variable defined in that row of the table. When such a reference to a built-in unit also includes a component reference, the component being referenced SHALL be immaterial to the interpretation of the model.
        </para>
      </listitem>
      <listitem>
        <para>
          When present in an information item which is a descendant of a
          component element, a variable reference SHALL be the name of a
          variable, and SHALL refer to the variable element in the same
          component with a name attribute identical to the variable
          reference.
        </para>
      </listitem>
      <listitem>
        <para>
          In all other cases, a variable reference SHALL consist of a component reference and a
          variable name. In this case, the variable reference SHALL be treated
          as if it was present in the component element referenced by the
          component reference.
        </para>
      </listitem>
    </orderedlist>
  </section>
  <table id='variables-table' frame='all'>
    <title>Built-in variables</title>
    <tgroup cols='3'>
      <thead>
        <row>
          <entry>Name</entry>
          <entry>Type</entry>
          <entry>Interpretation</entry>
        </row>
      </thead>
      <tbody>
        <row>
          <entry>boolean</entry>
          <entry>type</entry>
          <entry>As a built in type for objects which can be either true or false.</entry>
        </row>
        <row>
          <entry>identifier</entry>
          <entry>type</entry>
          <entry>A built in type for representing objects which act as unique identifiers, but which do not necessarily have any representation as another type.</entry>
        </row>
        <row>
          <entry>real_ampere</entry>
          <entry>type</entry>
          <entry>A built in type for real numbers in the SI base units ampere.</entry>
        </row>
        <row>
          <entry>real_becquerel</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units becquerel, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup>
                  <mml:mi>real_second</mml:mi>
                  <mml:mn>-1</mml:mn>
                </mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_candela</entry>
          <entry>type</entry>
          <entry>A built in type for real numbers in the SI base units candela.</entry>
        </row>
        <row>
          <entry>real_celsius</entry>
          <entry>type</entry>
          <entry>A built in type for real numbers in derived units Celsius, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_kelvin</mml:mi>
              </mml:mrow>
            </mml:math>
            and with offset 273.15</entry>
        </row>
        <row>
          <entry>real_coulomb</entry>
          <entry>type</entry>
          <entry>A built in type for real numbers in derived units coulomb, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_second</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_ampere</mml:mi>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_dimensionless</entry>
          <entry>type</entry>
          <entry>A built in type for dimensionless real numbers</entry>
        </row>
        <row>
          <entry>real_farad</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units farad, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_metre</mml:mi><mml:mn>-2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_kilogram</mml:mi><mml:mn>-1</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_second</mml:mi><mml:mn>4</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_ampere</mml:mi><mml:mn>2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_gram</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units gram, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:msup>
                  <mml:mn>10</mml:mn>
                  <mml:mn>-3</mml:mn>
                </mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_kilogram</mml:mi>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_gray</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units gray, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_metre</mml:mi><mml:mn>2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_second</mml:mi><mml:mn>-2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_henry</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units henry, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_metre</mml:mi><mml:mn>2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_second</mml:mi><mml:mn>-2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_ampere</mml:mi><mml:mn>-2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_hertz</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units hertz, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_second</mml:mi><mml:mn>-1</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_joule</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units joule, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_metre</mml:mi><mml:mn>2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_second</mml:mi><mml:mn>-2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_katal</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units katal, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_second</mml:mi><mml:mn>-1</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_mole</mml:mi>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_kelvin</entry>
          <entry>type</entry>
          <entry>A built in type for real numbers in the SI base units kelvin.</entry>
        </row>
        <row>
          <entry>real_kilogram</entry>
          <entry>type</entry>
          <entry>A built in type for real numbers in the SI base units kilogram.</entry>
        </row>
        <row>
          <entry>real_liter</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units liter, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:msup>
                  <mml:mn>10</mml:mn>
                  <mml:mn>-3</mml:mn>
                </mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup>
                  <mml:mi>real_metre</mml:mi>
                  <mml:mn>3</mml:mn>
                </mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_litre</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units litre, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:msup>
                  <mml:mn>10</mml:mn>
                  <mml:mn>-3</mml:mn>
                </mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup>
                  <mml:mi>real_metre</mml:mi>
                  <mml:mn>3</mml:mn>
                </mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_lumen</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units lumen, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_candela</mml:mi>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_lux</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units lux, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup>
                  <mml:mi>real_metre</mml:mi>
                  <mml:mn>-2</mml:mn>
                </mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_candela</mml:mi>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_meter</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units meter, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_metre</mml:mi>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_metre</entry>
          <entry>type</entry>
          <entry>A built in type for real numbers in the SI base units metre.</entry>
        </row>
        <row>
          <entry>real_mole</entry>
          <entry>type</entry>
          <entry>A built in type for real numbers in the SI base units mole.</entry>
        </row>
        <row>
          <entry>real_newton</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units newton, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_metre</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_second</mml:mi><mml:mn>-2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_ohm</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units ohm, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_metre</mml:mi><mml:mn>2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_second</mml:mi><mml:mn>-3</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_ampere</mml:mi><mml:mn>-2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_pascal</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units pascal, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_metre</mml:mi><mml:mn>-1</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_second</mml:mi><mml:mn>-2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_radian</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units radian, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_second</entry>
          <entry>type</entry>
          <entry>A built in type for real numbers in the SI base units second.</entry>
        </row>
        <row>
          <entry>real_siemens</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units siemens, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_metre</mml:mi><mml:mn>-2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_kilogram</mml:mi><mml:mn>-1</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_second</mml:mi><mml:mn>3</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_ampere</mml:mi><mml:mn>2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_sievert</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units sievert, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_metre</mml:mi><mml:mn>2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_second</mml:mi><mml:mn>-2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_steradian</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units steradian, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_tesla</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units tesla, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_second</mml:mi><mml:mn>-2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_ampere</mml:mi><mml:mn>-1</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_volt</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units volt, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_metre</mml:mi><mml:mn>2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_second</mml:mi><mml:mn>-3</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_ampere</mml:mi><mml:mn>-1</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_watt</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units watt, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_metre</mml:mi><mml:mn>2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_second</mml:mi><mml:mn>-3</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>real_weber</entry>
          <entry>type</entry>
          <entry>
            A built in type for real numbers in derived units weber, derived as
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_metre</mml:mi><mml:mn>2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>real_kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_second</mml:mi><mml:mn>-2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>real_ampere</mml:mi><mml:mn>-1</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
        </row>
        <row>
          <entry>type</entry>
          <entry>type</entry>
          <entry>A built in type for all types.</entry>
        </row>
      </tbody>
    </tgroup>
  </table>
  <section>
    <title>Interpretation of encapsulation</title>
    <orderedlist>
      <listitem>
        <para>
          For the purposes of this specification, there SHALL be a conceptual
          encapsulation digraph in which there is one node for every
          component in the CellML model.
        </para>
      </listitem>
      <listitem>
        <para>
          Where a component_ref element appears as a child of another
          component_ref element, then there SHALL be an arc in
          the encapsulation digraph, and that arc SHALL be from the
          component referenced by the parent component_ref element, and to the
          component referenced by the child component_ref element.
        </para>
      </listitem>
      <listitem>
        <para>
          The encapsulation digraph MUST NOT contain any loops or cycles,
          and the in-degree of a node MUST NOT exceed one (that is, it must be
          a forest).
        </para>
      </listitem>
      <listitem>
        <para>
          The encapsulated set for a component A SHALL be the set of all
          components to which there exists an arc in the encapsulation digraph
          from the node corresponding to A.
        </para>
      </listitem>
      <listitem>
        <para>
          The encapsulation parent for a component A SHALL be the component
          corresponding to the node which is the parent node in the
          encapsulation digraph of the node corresponding to A.
        </para>
      </listitem>
      <listitem>
        <para>
          The sibling set for a component A SHALL be the set of all components
          which have the same encapsulation parent as A, or in the case that A
          has no encapsulation parent, SHALL be the set of all components which
          do not have an encapsulation parent.
        </para>
      </listitem>
      <listitem>
        <para>
          The hidden set for a component A SHALL be the set of all components
          B where component B is not in the encapsulated set for component A,
          and component B is not the encapsulation parent of component A,
          and component B is not in the sibling set for component A.
        </para>
      </listitem>
      <listitem>
        <para>
          CellML models MUST NOT contain connection elements such that the
          component referenced by the component_1 attribute is in the hidden set
          of the component referenced by the component_2 attribute.
        </para>
      </listitem>
      <!-- To do: Add in something about containment, or get community
           consensus to drop containment from the core specification and move
           it into the metadata. See tracker item 316. -->
    </orderedlist>
  </section>
  <section>
    <title>Variable equivalence networks</title>
    <orderedlist>
      <listitem>
        <para>
          A variable equivalence network SHALL be a graph with one
          node for every variable element in the CellML model, and in addition,
          with one node for every built in variable.
        </para>
      </listitem>
      <listitem>
        <para>
          For every map_variables element present in the CellML Model, there SHALL
          be an edge in the variable equivalence network.
        </para>
      </listitem>
      <listitem>
        <para>
          Two different built in variables MUST NOT form part of the same connected component, 
        </para>
      </listitem>
      <listitem>
        <para>
          One endpoint of the edge in the variable equivalence network SHALL
          be the node corresponding to the variable (A) referenced by
          the component_1 and variable_1 attributes.
        </para>
      </listitem>
      <listitem>
        <para>
          One endpoint of the edge in the variable equivalence network SHALL
          be the node corresponding to the variable (B) referenced by
          the component_2 and variable_2 attributes.
        </para>
      </listitem>
      <listitem>
        <para>
          CellML models MUST NOT contain any pair of map_variables elements which
          each make reference to the same sets of variables (without regard to
          whether the variable_1 attribute of one map_variables element references
          the variable referenced by the variable_1 or variable_2 attribute of
          the other).
        </para>
      </listitem>
      <listitem>
        <para>
          When the component parent element of variable A is in the sibling set of
          the component parent element of variable B, the applicable
          interface for variables A and B SHALL be the public interface.
        </para>
      </listitem>
      <listitem>
        <para>
          Where the component parent element of variable A is in the
          encapsulated set of the component parent element of variable B,
          the applicable interface for variable A SHALL be the public interface,
          and the applicable interface for variable B SHALL be the private
          interface.
        </para>
      </listitem>
      <listitem>
        <para>
          Where the component parent element of variable B is in the
          encapsulated set of the component parent element of variable A,
          the applicable interface for variable A SHALL be the private
          interface, and the applicable interface for variable B SHALL be the
          public interface.
        </para>
      </listitem>
      <listitem>
        <para>
          For a given variable, if the applicable interface is the public
          interface, the applicable interface attribute SHALL be the
          public_interface attribute information item on the corresponding
          variable element. If the applicable interface is the private
          interface, the applicable interface attribute SHALL be the
          private_interface attribute information item on the corresponding
          variable element.
        </para>
      </listitem>
      <listitem>
        <para>
          In any case, if the applicable interface attribute
          is absent, the following rules in this section SHALL still apply as if
          the applicable interface attribute was present, and had the value
          no.
        </para>
      </listitem>
      <listitem>
        <para>
          Despite the above rules in this section, built in variables SHALL be treated, for the purpose of computing the variable equivalence network, as if the applicable interface attribute was present and equal to yes.
        </para>
      </listitem>
      <listitem>
        <para>
          CellML models MUST NOT contain map_variables elements unless the
          value of the applicable interface attributes on variables A and B are
          both yes.
        </para>
      </listitem>
      <listitem>
        <para>
          For the purposes of this specification, the variable elements in a
          CellML Model SHALL be treated as belonging to one of several disjoint
          sets of connected variables. Each set of connected variables is a
          set of all variable elements for which the corresponding nodes
          in the variable equivalence network form a connected set.
          Each set of connected variables represents one variable in the
          mathematical model.
        </para>
      </listitem>
      <listitem>
        <para>
          For the purposes of this specification, for every set of connected
          variables, one variable SHALL arbitrarily be selected as the source
          variable. Within this specification, the variable in the mathematical
          model is described as if it was of the type specified on the source
          variable element.
        </para>
      </listitem>
    </orderedlist>
  </section>
  <section id="types-on-variables">
    <title>Interpretation of types and units</title>
    <orderedlist>
      <listitem>
        <para>
          The word <em>type</em> SHALL, as the context allows, refer to a connected subgraph of the variable equivalence graph which meets the following constraints.
        </para>
      </listitem>
      <listitem>
        <para>
          Every variable MUST have a type associated with it through use of the type attribute information item. The value of the type attribute information item MUST be a valid variable reference to a member of the connected subgraph for the corresponding type.
        </para>
      </listitem>
      <listitem>
        <para>
          Variable A SHALL be said to have type B (where B is also a variable) if and only if the type attribute on variable A is a variable reference to a variable which is, in the variable equivalence network, reachable from variable B.
        </para>
      </listitem>
      <listitem>
        <para>
          All variables which are members of the connected subgraph corresponding to a type (referred to as type variables)  MUST have type <em>type</em>.
        </para>
      </listitem>
      <listitem>
        <para>
          .
        </para>
      </listitem>
    </orderedlist>
  </section>
  <table id='prefix-table' frame='all'>
    <title>Prefix values</title>
    <tgroup cols='2'>
      <thead>
        <row>
          <entry>Prefix Name</entry>
          <entry>Prefix Term</entry>
        </row>
      </thead>
      <tbody>
        <row>
          <entry>yotta</entry>
  	  <entry>24</entry>
        </row>
        <row>
          <entry>zetta</entry>
 	  <entry>21</entry>
        </row>
        <row>
          <entry>exa</entry>
 	  <entry>18</entry>
        </row>
        <row>
          <entry>peta</entry>
 	  <entry>15</entry>
        </row>
        <row>
          <entry>tera</entry>
 	  <entry>12</entry>
        </row>
        <row>
          <entry>giga</entry>
 	  <entry>9</entry>
        </row>
        <row>
          <entry>mega</entry>
 	  <entry>6</entry>
        </row>
        <row>
          <entry>kilo</entry>
 	  <entry>3</entry>
        </row>
        <row>
          <entry>hecto</entry>
 	  <entry>2</entry>
        </row>
        <row>
          <entry>deka</entry>
 	  <entry>1</entry>
        </row>
        <row>
          <entry>deci</entry>
  	  <entry>-1</entry>
        </row>
        <row>
          <entry>centi</entry>
 	  <entry>-2</entry>
        </row>
        <row>
          <entry>milli</entry>
 	  <entry>-3</entry>
        </row>
        <row>
          <entry>micro</entry>
 	  <entry>-6</entry>
        </row>
        <row>
          <entry>nano</entry>
 	  <entry>-9</entry>
        </row>
        <row>
          <entry>pico</entry>
 	  <entry>-12</entry>
        </row>
        <row>
          <entry>femto</entry>
 	  <entry>-15</entry>
        </row>
        <row>
          <entry>atto</entry>
 	  <entry>-18</entry>
        </row>
        <row>
          <entry>zepto</entry>
 	  <entry>-21</entry>
        </row>
        <row>
          <entry>yocto</entry>
 	  <entry>-24</entry>
        </row>
      </tbody>
    </tgroup>
  </table>
  <section id="interpretation-of-units">
    <title>Interpretation of units</title>
    <orderedlist>
      <listitem>
        <para>
          The base units SHALL consist of the user defined base units, and the
          built-in base units (those units defined in rows of
          <xref linkend='units-table' /> having 'yes' in the 'Is base unit?'
          column).
        </para>
      </listitem>
      <listitem>
        <para>
          There SHALL be one user defined base unit for every units element
          which has a base_units attribute in the empty namespace, having value
          yes.
        </para>
      </listitem>
      <listitem>
        <para>
          The base unit reduction of a units reference SHALL consist of a
          real valued offset, a real valued multiplier, and a set of
          tuples each consisting of a base unit and a real valued exponent.
          The base unit reduction of a  units reference SHALL be determined as
          follows:
          <orderedlist>
            <listitem>
              <para>
                Where the units reference is to a unit which is a base unit,
                then the base unit reduction of the units reference SHALL have
                offset zero, multiplier 1.0, and the set of tuples SHALL have a single
                member, which SHALL consist of the base units being referenced
                and the exponent 1.0.
              </para>
            </listitem>
            <listitem>
              <para>
                Where the units reference is to built-in units other than a
                base unit, then the base unit reduction SHALL be derived from
                the row of <xref linkend='units-table' /> for which the value
                in the 'Name' column matches the name of the units reference.
                The offset of the base unit reduction SHALL be equal to the
                number in the 'Offset from base units' column of the row, and
                the multiplier SHALL be equal to the number at the start of
                the 'Multiplier and dimensions in terms of base units' column
                of the row.
                The set of tuples SHALL contain one member for every built-in
                base unit named in the 'Multiplier and dimensions in terms of
                base units' column of the row, and each of these tuples SHALL
                contain the built-in unit referenced, and the exponent appearing
                in superscript immediately after the units name in the table
                cell.
              </para>
            </listitem>
            <listitem>
              <para>
                Where the units reference is to a unit which is neither built-in,
                nor a base unit, the resultant base unit reduction SHALL be
                defined as a composition of the base unit reductions referenced
                from the unit element information items (the operand base unit
                reductions), in accordance with the following rules:
                <orderedlist>
                  <listitem>
                    <para>
                      The prefix term is a conceptual property of unit
                      elements, defined here for later use. If the unit element
                      does not have a prefix information item, the prefix term
                      SHALL have value zero. If the prefix
                      attribute information item has a value which is a real
                      number string, then the prefix term SHALL have the
                      corresponding numerical value. Otherwise, the
                      prefix attribute information item MUST have a value taken
                      from the 'Prefix Name' column of
                      <xref linkend='prefix-table' />, and the prefix term
                      SHALL have the value taken from the 'Prefix Term' column
                      of the same row.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      The exponent term is a conceptual property of unit
                      elements, defined here for later use. If a unit element
                      has no exponent attribute information item, the exponent
                      term SHALL have value 1.0. Otherwise, the value of the
                      exponent attribute information item MUST be a real number
                      string, and the value of the exponent term SHALL be the
                      numerical value of that string.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      The multiplier term is a conceptual property of unit
                      elements, defined here for later use. The multiplier term
                      SHALL be the real number value of the multiplier attribute
                      information item on the units element (or 1.0 in the
                      absence of such an attribute information item),
                      multiplied by 10.0 raised to the power of the negative of
                      the product of the prefix term and the exponent term.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      The offset term is a conceptual property of unit
                      elements, defined here for later use. If a unit element
                      has no offset attribute information item, the offset
                      term SHALL have value zero. Otherwise, the value of the
                      offset attribute information item MUST be a real number
                      string, and the value of the offset term SHALL be the
                      numerical value of that string.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Where the units reference is to a units element with a
                      single unit child element, then the resultant base unit
                      reduction SHALL have multiplier equal to the product of
                      the multiplier of the operand base unit reduction and the
                      multiplier term of the unit element. It SHALL have offset
                      equal to the sum of the offset of the operand base unit
                      reduction and the offset term of the unit element.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Where the units reference is to a units element with a
                      number of unit child elements not equal to one, then the
                      resultant base unit reduction SHALL have multiplier equal
                      to the product of the multipliers of each operand base
                      unit reduction, and the multiplier term of each unit
                      element.  It SHALL have offset equal to zero.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      The set of tuples on the resultant base unit reduction
                      SHALL have one member for every distinct base unit present
                      in the set of tuples for any of the operand base unit
                      reductions. The exponent alongside each of these base
                      units in the resultant base unit reduction SHALL be the sum,
                      across all tuples for the base unit from operand base
                      unit reductions, of pairwise products of the exponent
                      term on the corresponding unit element and the exponent
                      from the tuple.
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
          </orderedlist>
        </para>
      </listitem>
    </orderedlist>
  </section>
  <section id="units-on-variables">
    <title>The effect of units on variables</title>
    <orderedlist>
      <listitem>
        <para>
          The units attribute on a variable element MUST be a valid units
          reference. The target of this units reference is referred to in
          as the variable units, and the corresponding base
          units reduction is referred to as the variable base unit reduction.
        </para>
      </listitem>
      <listitem>
        <para>
          The variable base unit reduction of a variable element MUST have an
          identical set of tuples to the set of tuples on the source variable
          base element units reduction. Two sets of tuples SHALL be
          considered identical if and only if neither set contains any tuple
          not present in the other. Two tuples are considered identical if both
          the base units and exponent on the tuple are the same.
        </para>
      </listitem>
      <listitem>
        <para>
          The following symbols are defined for the purposes of the formulae in
          the 'Interpretation of Mathematics' section:
          <orderedlist>
            <listitem>
              <para>
                <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
                  <mml:msub>
                    <mml:mi>m</mml:mi>
                    <mml:mi>V</mml:mi>
                  </mml:msub>
                </mml:math>
                is the multiplier on the variable base unit reduction.
              </para>
            </listitem>
            <listitem>
              <para>
                <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
                  <mml:msub>
                    <mml:mi>o</mml:mi>
                    <mml:mi>V</mml:mi>
                  </mml:msub>
                </mml:math>
                is the offset on the variable base unit reduction.
              </para>
            </listitem>
            <listitem>
              <para>
                <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
                  <mml:msub>
                    <mml:mi>m</mml:mi>
                    <mml:mi>S</mml:mi>
                  </mml:msub>
                </mml:math>
                is the multiplier on the source variable base unit reduction.
              </para>
            </listitem>
            <listitem>
              <para>
                <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
                  <mml:msub>
                    <mml:mi>o</mml:mi>
                    <mml:mi>S</mml:mi>
                  </mml:msub>
                </mml:math>
                is the offset on the source variable base unit reduction.
              </para>
            </listitem>
          </orderedlist>
        </para>
      </listitem>
    </orderedlist>
  </section>
  <section id="initial-value-interpretation">
    <title>Interpretation of initial values</title>
    <orderedlist>
      <listitem>
        <para>
          This section applies to the interpretation of the initial_value
          attribute, when it appears as an attribute information item on
          a variable element.
        </para>
      </listitem>
      <listitem>
        <para>
          The initial_value attribute MUST either be a real number string, or
          a variable reference.
        </para>
      </listitem>
      <listitem>
        <para>
          TO DO: Need a reasonable definition of the conditions when the
          initial_value holds, because we can't really
          use the 1.1 version because it is problematic for a number of reasons.
        </para>
      </listitem>
      <listitem>
        <para>
          Where the initial_value attribute has a real number value, it SHALL be
          interpreted as a statement that the variable on which the attribute
          appears is equal to that real number value, under the conditions that
          the initial value holds.
        </para>
      </listitem>
      <listitem>
        <para>
          Where the initial_value attribute is a variable reference, it SHALL
          be interpreted as a statement that the variable on which the attribute
          appears is equal to the referenced variable under the conditions the
          initial value holds.
        </para>
      </listitem>
    </orderedlist>
  </section>
  <section>
    <title>Interpretation of imports</title>
    <orderedlist>
      <listitem>
        <para>
          Each import element present in a CellML Infoset (the importing infoset)
          SHALL define a new and separate instance of the CellML Infoset referenced
          by the href attribute (the imported infoset).
        </para>
      </listitem>
      <listitem>
        <para>
          The following component elements SHALL be "pertinent component elements":
          <orderedlist>
            <listitem>
              <para>
                all component elements in the top-level CellML
                Infoset for the CellML Model, and,
              </para>
            </listitem>
            <listitem>
              <para>
                all component elements referenced by import components in the top-level
                CellML Infoset, and,
              </para>
            </listitem>
            <listitem>
              <para>
                all component elements which are descendants in the encapsulation
                digraph of a pertinent component element.
              </para>
            </listitem>
          </orderedlist>
        </para>
      </listitem>
    </orderedlist>
  </section>
  <section>
    <title>Interpretation of the mathematics</title>
    <orderedlist>
      <listitem>
        <para>
          Every MathML element in the CellML Model, which appears as a direct
          child information item of the MathML math element information item,
          which in turn appears as a child information item of a pertinent component
          element, SHALL be treated as a statement which holds true
          unconditionally.
        </para>
      </listitem>
      <listitem>
        <para>
          Every MathML element which appears as a direct child information
          item of the MathML math element information item SHALL be treated
          as a statement which holds true unconditionally.
        </para>
      </listitem>
      <listitem>
        <para>
          Every variable name given using the MathML ci element SHALL be treated
          as a variable reference within the component element ancestor the
          MathML is contained within.
        </para>
      </listitem>
      <listitem>
        <para>
          Every such variable reference SHALL be treated as a linear
          expression
          <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
            <mml:mrow>
              <mml:mrow>
                <mml:mfrac>
                  <mml:msub>
                    <mml:mi>m</mml:mi>
                    <mml:mi>V</mml:mi>
                  </mml:msub>
                  <mml:msub>
                    <mml:mi>m</mml:mi>
                    <mml:mi>S</mml:mi>
                  </mml:msub>
                </mml:mfrac>
                <mml:mo>&#x00D7;<!--times--></mml:mo>
                <mml:mi>x</mml:mi>
              </mml:mrow>
              <mml:mo>+</mml:mo>
              <mml:msub>
                <mml:mi>o</mml:mi>
                <mml:mi>V</mml:mi>
              </mml:msub>
              <mml:mo>-</mml:mo>
              <mml:mfrac>
                <mml:msub>
                  <mml:mi>m</mml:mi>
                  <mml:mi>V</mml:mi>
                </mml:msub>
                <mml:msub>
                  <mml:mi>m</mml:mi>
                  <mml:mi>S</mml:mi>
                </mml:msub>
              </mml:mfrac>
              <mml:mo>&#x00D7;<!--times--></mml:mo>
              <mml:msub>
                <mml:mi>o</mml:mi>
                <mml:mi>S</mml:mi>
              </mml:msub>
            </mml:mrow>
          </mml:math>. In this equation, x represents the variable in the
          mathematical model, in the units on the source variable element,
          while the remaining variables SHALL be interpreted as specified in
          <xref linkend="units-on-variables"/>.
        </para>
      </listitem>
      <listitem>
        <para>
          Every MathML cn element MUST have an attribute information item in
          the CellML 1.1 namespace, with local name <literal>units</literal>. The value of this
          attribute information item MUST be a valid units reference. The
          referenced units SHALL NOT affect the mathematical interpreation of
          the CellML model. However, CellML Processing Software MAY use this
          information to assist the user in the detection and correction of
          units errors in the CellML Model.
        </para>
      </listitem>
    </orderedlist>
  </section>
</section>
