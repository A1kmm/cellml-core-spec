<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE article SYSTEM "-//OASIS//DTD DocBook XML">
<section>
  <title>Interpretation of CellML models</title>
  <section>
    <title>Component reference</title>
    <orderedlist>
      <listitem>
        <para>
          A component reference SHALL be the name of a component, and SHALL be
          interpreted based on the context within the CellML Model in which it occurs.
        </para>
      </listitem>
      <listitem>
        <para>
          A component reference present in an information item that is a
          descendant of a <literal>model</literal> element SHALL be identical to either the <literal>name</literal>
          attribute on a <literal>component</literal> element or to the <literal>name</literal> attribute on an import
          component element.
        </para>
      </listitem>
      <listitem>
        <para>
          A component reference that is identical to the <literal>name</literal> attribute on a
          <literal>component</literal> element SHALL be treated as a reference to that <literal>component</literal>
          element.
        </para>
      </listitem>
      <listitem>
        <para>
          A component reference that is identical to the <literal>name</literal> attribute on an
          import component element SHALL be treated as if the component reference
          appeared in the imported model, and referred to the name specified in
          the <literal>component_ref</literal> attribute of the import component element.
        </para>
      </listitem>
      <listitem>
        <para>
          It is noted for the avoidance of doubt that CellML Models MAY apply
          the previous rule recursively, to reference an import component element
          that in turn references another import component element.
        </para>
      </listitem>
    </orderedlist>
  </section>
  <section>
    <title>Variable reference</title>
    <orderedlist>
      <listitem>
        <para>
          When present in an information item that is a descendant of a
          <literal>component</literal> element, a variable reference SHALL be the
          name of a variable, and SHALL refer to the <literal>variable</literal> element in the same
          component with a <literal>name</literal> attribute identical to the variable
          reference.
        </para>
      </listitem>
      <listitem>
        <para>
          In all other cases, a variable reference SHALL consist of a component reference and a
          variable name. In this case, the variable reference SHALL be treated
          as if it was present in the <literal>component</literal> element referenced by the
          component reference.
        </para>
      </listitem>
    </orderedlist>
  </section>
  <section>
    <title>Interpretation of encapsulation</title>
    <orderedlist>
      <listitem>
        <para>
          For the purposes of this specification, there SHALL be a conceptual
          encapsulation digraph in which there is one node for every
          component in the CellML model.
        </para>
      </listitem>
      <listitem>
        <para>
          Where a <literal>component_ref</literal> element appears as a child of another
          <literal>component_ref</literal> element, then there SHALL be an arc in
          the encapsulation digraph, and that arc SHALL be from the
          component referenced by the parent <literal>component_ref</literal> element, and to the
          component referenced by the child <literal>component_ref</literal> element.
        </para>
      </listitem>
      <listitem>
        <para>
          The encapsulation digraph MUST NOT contain any loops or cycles,
          and the in-degree of a node MUST NOT exceed one (that is, it must be
          a forest).
        </para>
      </listitem>
      <listitem>
        <para>
          The encapsulated set for a component A SHALL be the set of all
          components to which there exists an arc in the encapsulation digraph
          from the node corresponding to A.
        </para>
      </listitem>
      <listitem>
        <para>
          The encapsulation parent for a component A SHALL be the component
          corresponding to the node that is the parent node in the
          encapsulation digraph of the node corresponding to A.
        </para>
      </listitem>
      <listitem>
        <para>
          The sibling set for a component A SHALL be the set of all components
          that have the same encapsulation parent as A, or in the case that A
          has no encapsulation parent, SHALL be the set of all components that
          do not have an encapsulation parent.
        </para>
      </listitem>
      <listitem>
        <para>
          The hidden set for a component A SHALL be the set of all components
          B where component B is not in the encapsulated set for component A,
          and component B is not the encapsulation parent of component A,
          and component B is not in the sibling set for component A.
        </para>
      </listitem>
      <listitem>
        <para>
          CellML models MUST NOT contain <literal>connection</literal> elements such that the
          component referenced by the <literal>component_1</literal> attribute is in the hidden set
          of the component referenced by the <literal>component_2</literal> attribute.
        </para>
      </listitem>
    </orderedlist>
  </section>
  <section>
    <title>Variable equivalence networks</title>
    <orderedlist>
      <listitem>
        <para>
          A variable equivalence network SHALL be a graph with one
          node for every <literal>variable</literal> element in the CellML model.
        </para>
      </listitem>
      <listitem>
        <para>
          For every <literal>map_variables</literal> element present in the CellML Model, there SHALL
          be an edge in the variable equivalence network.
        </para>
      </listitem>
      <listitem>
        <para>
          One endpoint of the edge in the variable equivalence network SHALL
          be the node corresponding to the variable (A) referenced by
          the <literal>component_1</literal> and <literal>variable_1</literal> attributes.
        </para>
      </listitem>
      <listitem>
        <para>
          One endpoint of the edge in the variable equivalence network SHALL
          be the node corresponding to the variable (B) referenced by
          the <literal>component_2</literal> and <literal>variable_2</literal> attributes.
        </para>
      </listitem>
      <listitem>
        <para>
          CellML models MUST NOT contain any pair of <literal>map_variables</literal> elements that
          each make reference to the same sets of variables (without regard to
          whether the <literal>variable_1</literal> attribute of one <literal>map_variables</literal> element references
          the variable referenced by the <literal>variable_1</literal> or <literal>variable_2</literal> attribute of
          the other).
        </para>
      </listitem>
      <listitem>
        <para>
          When the <literal>component</literal> parent element of variable A is in the sibling set of
          the <literal>component</literal> parent element of variable B, the applicable
          interface for variables A and B SHALL be the public interface.
        </para>
      </listitem>
      <listitem>
        <para>
          Where the <literal>component</literal> parent element of variable A is in the
          encapsulated set of the <literal>component</literal> parent element of variable B,
          the applicable interface for variable A SHALL be the public interface,
          and the applicable interface for variable B SHALL be the private
          interface.
        </para>
      </listitem>
      <listitem>
        <para>
          Where the <literal>component</literal> parent element of variable B is in the
          encapsulated set of the <literal>component</literal> parent element of variable A,
          the applicable interface for variable A SHALL be the private
          interface, and the applicable interface for variable B SHALL be the
          public interface.
        </para>
      </listitem>
      <listitem>
        <para>
          For a given variable, if the applicable interface is the public
          interface, the applicable interface attribute SHALL be the
          <literal>public_interface</literal> attribute information item on the corresponding
          <literal>variable</literal> element. If the applicable interface is the private
          interface, the applicable interface attribute SHALL be the
          <literal>private_interface</literal> attribute information item on the corresponding
          variable element.
        </para>
      </listitem>
      <listitem>
        <para>
          In any case, if the applicable interface attribute
          is absent, the following rules in this section SHALL still apply as if
          the applicable interface attribute was present, and had the value
          <literal>no</literal>.
        </para>
      </listitem>
      <listitem>
        <para>
          CellML models MUST NOT contain <literal>map_variables</literal> elements unless the
          value of the applicable interface attributes on variables A and B are
          both yes.
        </para>
      </listitem>
      <listitem>
        <para>
          The variable equivalence network MUST NOT 
          contain any cycles in the underlying graph (that is, it must be a
          tree).
        </para>
      </listitem>
      <listitem>
        <para>
          For the purposes of this specification, the <literal>variable</literal> elements in a
          CellML Model SHALL be treated as belonging to one of several disjoint
          sets of connected variables. Each set of connected variables is a
          set of all variable elements for which the corresponding nodes
          in the variable equivalence network form a connected set.
          Each set of connected variables represents one variable in the
          mathematical model.
        </para>
      </listitem>
      <listitem>
        <para>
          For the purposes of this specification, for every set of connected
          variables, one variable SHALL arbitrarily be selected as the source
          variable. Within this specification, the variable in the mathematical
          model is described as if it was in the units specified on the source
          <literal>variable</literal> element.
        </para>
      </listitem>
      <listitem>
        <para>
          All variables in a variable equivalence network MUST have the same
          type.
        </para>
      </listitem>
      <listitem>
        <para>
          If any of the variables in a variable equivalence network have a
          <literal>units</literal> attribute, all variables in the variable equivalence network
          MUST contain units that are dimensionally compatible with each other.
        </para>
      </listitem>
      <listitem>
        <para>
          Two units are dimensionally compatible with each other if their canoncial
          forms are made up of the same base units with the same exponents. The canonical
          form of a unit is the form obtained by repeated expansion of units into their
          component units, and simplification to add exponents of identical base units.
        </para>
      </listitem>
    </orderedlist>
  </section>
  <section id="units-reference">
    <title>Units reference</title>
    <orderedlist>
      <listitem>
        <para>
          A units reference SHALL be a CellML identifier, and SHALL be
          interpreted based on the context within the CellML Model in which it occurs.
        </para>
      </listitem>
      <listitem>
        <para>
          A CellML Infoset MUST NOT contain a units reference to which all scoping rules are inapplicable.
        </para>
      </listitem>
      <listitem>
        <para>
          Where more than one of the units scoping rules apply, the applicable rule
          that appears first in this specification SHALL be used.
        </para>
      </listitem>
      <listitem>
        <para>The units scoping rules are as follows:</para>
        <orderedlist>
          <listitem>
            <para>
              Where a units reference appears in an information item that is
              descended from a <literal>component</literal> element, and there is a <literal>units</literal> element
              child of that <literal>component</literal> element with a <literal>name</literal> attribute identical to
              the units reference, then the units reference SHALL refer to that
              <literal>units</literal> element.
            </para>
          </listitem>
          <listitem>
            <para>
              Where a units reference appears in an information item that is descended from the <literal>model</literal> element, and there is a <literal>units</literal> element child of that <literal>model</literal> element with a <literal>name</literal> attribute identical to the units reference, then the units reference SHALL refer to that <literal>units</literal> element.
            </para>
          </listitem>
          <listitem>
            <para>
              Where there is an import units element in the CellML Infoset, such that
              the import units element has a name attribute identical to the units
              reference, then the units reference SHALL be treated as if the
              units reference appeared in the imported model, and referred to the
              name specified in the <literal>units_ref</literal> attribute of the import units element.
            </para>
          </listitem>
          <listitem>
            <para>
              Where the units reference is equal to a cell in the name column
              of <xref linkend='units-table' />, then the units reference SHALL be a
              reference to the built-in unit corresponding to that row of the
              table.
            </para>
          </listitem>
        </orderedlist>
      </listitem>
    </orderedlist>
  </section>
  <table id='units-table' frame='all'>
    <title>built-in units</title>
    <tgroup cols='3'>
      <thead>
        <row>
          <entry>Name</entry>
          <entry>Is base unit?</entry>
          <entry>Multiplier and dimensions in terms of base units</entry>
          <entry>Offset from base units</entry>
        </row>
      </thead>
      <tbody>
        <row>
          <entry>ampere</entry>
          <entry>yes</entry>
          <entry>-</entry>
          <entry>-</entry>
        </row>
        <row>
          <entry>becquerel</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup>
                  <mml:mi>second</mml:mi>
                  <mml:mn>-1</mml:mn>
                </mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>candela</entry>
          <entry>yes</entry>
          <entry>-</entry>
          <entry>-</entry>
        </row>
        <row>
          <entry>celsius</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>kelvin</mml:mi>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>273.15</entry>
        </row>
        <row>
          <entry>coulomb</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>second</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>ampere</mml:mi>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>dimensionless</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mn>1</mml:mn>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>farad</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>metre</mml:mi><mml:mn>-2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>kilogram</mml:mi><mml:mn>-1</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>second</mml:mi><mml:mn>4</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>ampere</mml:mi><mml:mn>2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>gram</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:msup>
                  <mml:mn>10</mml:mn>
                  <mml:mn>-3</mml:mn>
                </mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>kilogram</mml:mi>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>gray</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>metre</mml:mi><mml:mn>2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>second</mml:mi><mml:mn>-2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>henry</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>metre</mml:mi><mml:mn>2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>second</mml:mi><mml:mn>-2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>ampere</mml:mi><mml:mn>-2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>hertz</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>second</mml:mi><mml:mn>-1</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>joule</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>metre</mml:mi><mml:mn>2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>second</mml:mi><mml:mn>-2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>katal</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>second</mml:mi><mml:mn>-1</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>mole</mml:mi>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>kelvin</entry>
          <entry>yes</entry>
          <entry>-</entry>
          <entry>-</entry>
        </row>
        <row>
          <entry>kilogram</entry>
          <entry>yes</entry>
          <entry>-</entry>
          <entry>-</entry>
        </row>
        <row>
          <entry>liter</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:msup>
                  <mml:mn>10</mml:mn>
                  <mml:mn>-3</mml:mn>
                </mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup>
                  <mml:mi>metre</mml:mi>
                  <mml:mn>3</mml:mn>
                </mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>litre</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:msup>
                  <mml:mn>10</mml:mn>
                  <mml:mn>-3</mml:mn>
                </mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup>
                  <mml:mi>metre</mml:mi>
                  <mml:mn>3</mml:mn>
                </mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>lumen</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>candela</mml:mi>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>lux</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup>
                  <mml:mi>metre</mml:mi>
                  <mml:mn>-2</mml:mn>
                </mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>candela</mml:mi>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>meter</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>metre</mml:mi>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>metre</entry>
          <entry>yes</entry>
          <entry>-</entry>
          <entry>-</entry>
        </row>
        <row>
          <entry>mole</entry>
          <entry>yes</entry>
          <entry>-</entry>
          <entry>-</entry>
        </row>
        <row>
          <entry>newton</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>metre</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>second</mml:mi><mml:mn>-2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>ohm</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>metre</mml:mi><mml:mn>2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>second</mml:mi><mml:mn>-3</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>ampere</mml:mi><mml:mn>-2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>pascal</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>metre</mml:mi><mml:mn>-1</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>second</mml:mi><mml:mn>-2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>radian</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>second</entry>
          <entry>yes</entry>
          <entry>-</entry>
          <entry>-</entry>
        </row>
        <row>
          <entry>siemens</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>metre</mml:mi><mml:mn>-2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>kilogram</mml:mi><mml:mn>-1</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>second</mml:mi><mml:mn>3</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>ampere</mml:mi><mml:mn>2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>sievert</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>metre</mml:mi><mml:mn>2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>second</mml:mi><mml:mn>-2</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>steradian</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>tesla</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>second</mml:mi><mml:mn>-2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>ampere</mml:mi><mml:mn>-1</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>volt</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>metre</mml:mi><mml:mn>2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>second</mml:mi><mml:mn>-3</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>ampere</mml:mi><mml:mn>-1</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>watt</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>metre</mml:mi><mml:mn>2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>second</mml:mi><mml:mn>-3</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
        <row>
          <entry>weber</entry>
          <entry>no</entry>
          <entry>
            <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
              <mml:mrow>
                <mml:mn>1</mml:mn>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>metre</mml:mi><mml:mn>2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:mi>kilogram</mml:mi>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>second</mml:mi><mml:mn>-2</mml:mn></mml:msup>
                <mml:mo>&#xB7;</mml:mo>
                <mml:msup><mml:mi>ampere</mml:mi><mml:mn>-1</mml:mn></mml:msup>
              </mml:mrow>
            </mml:math>
          </entry>
          <entry>0</entry>
        </row>
      </tbody>
    </tgroup>
  </table>
  <table id='prefix-table' frame='all'>
    <title>Prefix values</title>
    <tgroup cols='2'>
      <thead>
        <row>
          <entry>Prefix Name</entry>
          <entry>Prefix Term</entry>
        </row>
      </thead>
      <tbody>
        <row>
          <entry>yotta</entry>
  	  <entry>24</entry>
        </row>
        <row>
          <entry>zetta</entry>
 	  <entry>21</entry>
        </row>
        <row>
          <entry>exa</entry>
 	  <entry>18</entry>
        </row>
        <row>
          <entry>peta</entry>
 	  <entry>15</entry>
        </row>
        <row>
          <entry>tera</entry>
 	  <entry>12</entry>
        </row>
        <row>
          <entry>giga</entry>
 	  <entry>9</entry>
        </row>
        <row>
          <entry>mega</entry>
 	  <entry>6</entry>
        </row>
        <row>
          <entry>kilo</entry>
 	  <entry>3</entry>
        </row>
        <row>
          <entry>hecto</entry>
 	  <entry>2</entry>
        </row>
        <row>
          <entry>deka</entry>
 	  <entry>1</entry>
        </row>
        <row>
          <entry>deci</entry>
  	  <entry>-1</entry>
        </row>
        <row>
          <entry>centi</entry>
 	  <entry>-2</entry>
        </row>
        <row>
          <entry>milli</entry>
 	  <entry>-3</entry>
        </row>
        <row>
          <entry>micro</entry>
 	  <entry>-6</entry>
        </row>
        <row>
          <entry>nano</entry>
 	  <entry>-9</entry>
        </row>
        <row>
          <entry>pico</entry>
 	  <entry>-12</entry>
        </row>
        <row>
          <entry>femto</entry>
 	  <entry>-15</entry>
        </row>
        <row>
          <entry>atto</entry>
 	  <entry>-18</entry>
        </row>
        <row>
          <entry>zepto</entry>
 	  <entry>-21</entry>
        </row>
        <row>
          <entry>yocto</entry>
 	  <entry>-24</entry>
        </row>
      </tbody>
    </tgroup>
  </table>
  <section id="interpretation-of-units">
    <title>Interpretation of units</title>
    <orderedlist>
      <listitem>
        <para>
          The base units SHALL consist of the user defined base units, and the
          built-in base units (those units defined in rows of
          <xref linkend='units-table' /> having 'yes' in the 'Is base unit?'
          column).
        </para>
      </listitem>
      <listitem>
        <para>
          There SHALL be one user defined base unit for every <literal>units</literal> element
          that has a <literal>base_units</literal> attribute in the empty namespace, having value
          yes.
        </para>
      </listitem>
      <listitem>
        <para>
          The base unit reduction of a units reference SHALL consist of a
          real valued offset, a real valued multiplier, and a set of
          tuples each consisting of a base unit and a real valued exponent.
          The base unit reduction of a  units reference SHALL be determined as
          follows:
          <orderedlist>
            <listitem>
              <para>
                Where the units reference is to a unit that is a base unit,
                then the base unit reduction of the units reference SHALL have
                offset zero, multiplier 1.0, and the set of tuples SHALL have a single
                member, which SHALL consist of the base units being referenced
                and the exponent 1.0.
              </para>
            </listitem>
            <listitem>
              <para>
                Where the units reference is to built-in units other than a
                base unit, then the base unit reduction SHALL be derived from
                the row of <xref linkend='units-table' /> for which the value
                in the 'Name' column matches the name of the units reference.
                The offset of the base unit reduction SHALL be equal to the
                number in the 'Offset from base units' column of the row, and
                the multiplier SHALL be equal to the number at the start of
                the 'Multiplier and dimensions in terms of base units' column
                of the row.
                The set of tuples SHALL contain one member for every built-in
                base unit named in the 'Multiplier and dimensions in terms of
                base units' column of the row, and each of these tuples SHALL
                contain the built-in unit referenced, and the exponent appearing
                in superscript immediately after the units name in the table
                cell.
              </para>
            </listitem>
            <listitem>
              <para>
                Where the units reference is to a unit that is neither built-in,
                nor a base unit, the resultant base unit reduction SHALL be
                defined as a composition of the base unit reductions referenced
                from the unit element information items (the operand base unit
                reductions), in accordance with the following rules:
                <orderedlist>
                  <listitem>
                    <para>
                      The prefix term is a conceptual property of unit
                      elements, defined here for later use. If the <literal>unit</literal> element
                      does not have a <literal>prefix</literal> information item, the prefix term
                      SHALL have value zero. If the <literal>prefix</literal>
                      attribute information item has a value that is a real
                      number string, then the prefix term SHALL have the
                      corresponding numerical value. Otherwise, the
                      <literal>prefix</literal> attribute information item MUST have a value taken
                      from the 'Prefix Name' column of
                      <xref linkend='prefix-table' />, and the prefix term
                      SHALL have the value taken from the 'Prefix Term' column
                      of the same row.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      The exponent term is a conceptual property of <literal>unit</literal>
                      elements, defined here for later use. If a <literal>unit</literal> element
                      has no <literal>exponent</literal> attribute information item, the exponent
                      term SHALL have value 1.0. Otherwise, the value of the
                      <literal>exponent</literal> attribute information item MUST be a real number
                      string, and the value of the exponent term SHALL be the
                      numerical value of that string.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      The multiplier term is a conceptual property of <literal>unit</literal>
                      elements, defined here for later use. The multiplier term
                      SHALL be the real number value of the <literal>multiplier</literal> attribute
                      information item on the <literal>units</literal> element (or 1.0 in the
                      absence of such an attribute information item),
                      multiplied by 10.0 raised to the power of the negative of
                      the product of the prefix term and the exponent term.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      The offset term is a conceptual property of unit
                      elements, defined here for later use. If a unit element
                      has no offset attribute information item, the offset
                      term SHALL have value zero. Otherwise, the value of the
                      offset attribute information item MUST be a real number
                      string, and the value of the offset term SHALL be the
                      numerical value of that string.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Where the units reference is to a <literal>units</literal> element with a
                      single <literal>unit</literal> child element, then the resultant base unit
                      reduction SHALL have multiplier equal to the product of
                      the multiplier of the operand base unit reduction and the
                      multiplier term of the unit element. It SHALL have offset
                      equal to the sum of the offset of the operand base unit
                      reduction and the offset term of the unit element.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Where the units reference is to a <literal>units</literal> element with a
                      number of <literal>unit</literal> child elements not equal to one, then the
                      resultant base unit reduction SHALL have multiplier equal
                      to the product of the multipliers of each operand base
                      unit reduction, and the multiplier term of each unit
                      element.  It SHALL have offset equal to zero.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      The set of tuples on the resultant base unit reduction
                      SHALL have one member for every distinct base unit present
                      in the set of tuples for any of the operand base unit
                      reductions. The exponent alongside each of these base
                      units in the resultant base unit reduction SHALL be the sum,
                      across all tuples for the base unit from operand base
                      unit reductions, of pairwise products of the exponent
                      term on the corresponding unit element and the exponent
                      from the tuple.
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
          </orderedlist>
        </para>
      </listitem>
    </orderedlist>
  </section>
  <section id="units-on-variables">
    <title>The effect of units on variables</title>
    <orderedlist>
      <listitem>
        <para>
          If present, the <literal>units</literal> attribute on a <literal>variable</literal> element MUST be a valid units
          reference. The target of this units reference is referred to
          as the variable units, and the corresponding base
          units reduction is referred to as the variable base unit reduction.
        </para>
      </listitem>
      <listitem>
        <para>
          The variable base unit reduction of a <literal>variable</literal> element MUST have an
          identical set of tuples to the set of tuples on the source variable
          base units reduction. Two sets of tuples SHALL be
          considered identical if and only if neither set contains any tuple
          not present in the other. Two tuples are considered identical if both
          the base units and exponent on the tuple are the same.
        </para>
      </listitem>
      <listitem>
        <para>
          The following symbols are defined for the purposes of the formulae in
          the 'Interpretation of Mathematics' section:
          <orderedlist>
            <listitem>
              <para>
                <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
                  <mml:msub>
                    <mml:mi>m</mml:mi>
                    <mml:mi>V</mml:mi>
                  </mml:msub>
                </mml:math>
                is the multiplier on the variable base unit reduction.
              </para>
            </listitem>
            <listitem>
              <para>
                <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
                  <mml:msub>
                    <mml:mi>o</mml:mi>
                    <mml:mi>V</mml:mi>
                  </mml:msub>
                </mml:math>
                is the offset on the variable base unit reduction.
              </para>
            </listitem>
            <listitem>
              <para>
                <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
                  <mml:msub>
                    <mml:mi>m</mml:mi>
                    <mml:mi>S</mml:mi>
                  </mml:msub>
                </mml:math>
                is the multiplier on the source variable base unit reduction.
              </para>
            </listitem>
            <listitem>
              <para>
                <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
                  <mml:msub>
                    <mml:mi>o</mml:mi>
                    <mml:mi>S</mml:mi>
                  </mml:msub>
                </mml:math>
                is the offset on the source variable base unit reduction.
              </para>
            </listitem>
          </orderedlist>
        </para>
      </listitem>
    </orderedlist>
  </section>
  <section id="type-interpretation">
    <title>Interpretation of the <literal>type</literal> attribute</title>
    <orderedlist>
      <listitem>
        <para>
          This section applies to the interpretation of the <literal>type</literal> attribute,
          a mandatory attribute information item on a <literal>variable</literal> element.
        </para>
      </listitem>
      <listitem>
        <para>
          The <literal>type</literal> attribute specifies the type that a variable should take.
          A type SHALL define the type of variables that a variable may take,
          but SHOULD NOT be used to describe the precise implementation-specific
          details of how data is represented.
        </para>
      </listitem>
    </orderedlist>
  </section>
  <section>
    <title>Interpretation of imports</title>
    <orderedlist>
      <listitem>
        <para>
          Each <literal>import</literal> element present in a CellML Infoset (the importing infoset)
          SHALL define a new and separate instance of the CellML Infoset referenced
          by the href attribute (the imported infoset).
        </para>
      </listitem>
      <listitem>
        <para>
          The following <literal>component</literal> elements SHALL be "pertinent <literal>component</literal> elements":
          <orderedlist>
            <listitem>
              <para>
                all <literal>component</literal> elements in the top-level CellML
                Infoset for the CellML Model, and,
              </para>
            </listitem>
            <listitem>
              <para>
                all <literal>component</literal> elements referenced by import components in the top-level
                CellML Infoset, and,
              </para>
            </listitem>
            <listitem>
              <para>
                all <literal>component</literal> elements that are descendants in the encapsulation
                digraph of a pertinent component element.
              </para>
            </listitem>
          </orderedlist>
        </para>
      </listitem>
    </orderedlist>
  </section>
  <section>
    <title>Interpretation of the mathematics</title>
    <orderedlist>
      <listitem>
        <para>
          Where full content MathML can be translated into strict content MathML using a rule in the MathML specification, then the rules in this specification SHALL be applied as if the equivalent strict content MathML form had been used.
        </para>
      </listitem>
      <listitem>
        <para>
          Every MathML element in the CellML Model which appears as a direct
          child information item of the MathML <literal>math</literal> element information item,
          which in turn appears as a child information item of a pertinent component
          element, SHALL be treated as a statement which holds true
          unconditionally.
        </para>
      </listitem>
      <listitem>
        <para>
          Every MathML element that appears as a direct child information
          item of the MathML <literal>math</literal> element information item SHALL be treated
          as a statement that holds true unconditionally.
        </para>
      </listitem>
      <listitem>
        <para>
          Every variable name given using the MathML <literal>ci</literal> element MUST either be:
          <orderedlist>
            <listitem>
              <para>
                a reference to a variable name bound by a bind element ancestor of the
                <literal>ci</literal> element.
              </para>
            </listitem>
            <listitem>
              <para>
                a reference to a variable within the <literal>component</literal> element ancestor the
                MathML is contained within.
              </para>
            </listitem>
          </orderedlist>
        </para>
      </listitem>
      <listitem>
        <para>
          Where the same variable name is bound by more than one <literal>bind</literal> element ancestor of a <literal>ci</literal> element, the <literal>ci</literal> element SHALL refer only to the bound variable from the <literal>bind</literal> element that is the descendant of all those other <literal>bind</literal> elements. Where the same variable name is defined by a <literal>bind</literal> element ancestor of a <literal>ci</literal> element and a model variable, the variable SHALL be treated as a bound variable, and SHALL NOT be treated as a model variable.
        </para>
      </listitem>
      <listitem>
        <para>
          Where a MathML <literal>ci</literal> element refers to a variable that is not in the independent
          variable set, the variable SHALL be treated as if it was a lexical closure
          over the independent variables of the application of each independent
          variable to the function giving the value of the variable
          in terms of each value of each independent variable.
        </para>
      </listitem>
      <listitem>
        <para>
          The MathML csymbol element information item with definitionURL attribute information
          item equal to "http://www.cellml.org/cellml/1.2#evaluatedAt" shall refer to a
          function of three operands. The first operand MUST be a MathML <literal>ci</literal> element referring
          to a variable that is in independent variable set. The application of this <literal>csymbol</literal>
          element shall be interpreted as meaning the value of the third operand, modified so
          that all lexical closures of the independent variable given as the first operand are
          removed and substituted for the value of the second operand.
        </para>
      </listitem>
      <listitem>
        <para>
          Every variable reference to a variable of type <literal>real</literal> SHALL be treated as a
          linear expression
          <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML">
            <mml:mrow>
              <mml:mrow>
                <mml:mfrac>
                  <mml:msub>
                    <mml:mi>m</mml:mi>
                    <mml:mi>S</mml:mi>
                  </mml:msub>
                  <mml:msub>
                    <mml:mi>m</mml:mi>
                    <mml:mi>V</mml:mi>
                  </mml:msub>
                </mml:mfrac>
                <mml:mo>&#x00D7;<!--times--></mml:mo>
                <mml:mi>x</mml:mi>
              </mml:mrow>
              <mml:mo>-</mml:mo>
              <mml:msub>
                <mml:mi>o</mml:mi>
                <mml:mi>V</mml:mi>
              </mml:msub>
              <mml:mo>+</mml:mo>
              <mml:mfrac>
                <mml:msub>
                  <mml:mi>m</mml:mi>
                  <mml:mi>S</mml:mi>
                </mml:msub>
                <mml:msub>
                  <mml:mi>m</mml:mi>
                  <mml:mi>V</mml:mi>
                </mml:msub>
              </mml:mfrac>
              <mml:mo>&#x00D7;<!--times--></mml:mo>
              <mml:msub>
                <mml:mi>o</mml:mi>
                <mml:mi>S</mml:mi>
              </mml:msub>
            </mml:mrow>
          </mml:math>. In this equation, x represents the variable in the
          mathematical model, in the units on the source variable element,
          while the remaining variables SHALL be interpreted as specified in
          <xref linkend="units-on-variables"/>.
        </para>
      </listitem>
      <listitem>
        <para>
          The MathML elements requiring additional type information are:
          <orderedlist>
            <listitem>
              <para>Every MathML <literal>cn</literal> element</para>
            </listitem>
            <listitem>
              <para>Every MathML <literal>ci</literal> element that appears within a bvar element
                    information item under a <literal>bind</literal> element information item.</para>
            </listitem>
          </orderedlist>
        </para>
      </listitem>
      <listitem>
        <para>
          Every MathML element requiring additional type information (as defined above) MUST have an attribute information item in
          the CellML 1.2 namespace, with local name <literal>type</literal>. The value of this
          attribute information item MUST be a valid type name.
        </para>
      </listitem>
      <listitem>
        <para>
          A MathML element requiring additional type information (as defined above) MAY have an attribute information item in
          the CellML 1.2 namespace, with local name <literal>units</literal>.
          Where the <literal>type</literal> attribute takes the value
          <literal>real</literal>, the <literal>units</literal> attribute
          MUST be present.
          The value of this
          attribute information item MUST be a valid units reference. The
          referenced units SHALL NOT affect the mathematical interpreation of
          the CellML model. However, CellML Processing Software MAY use this
          information to assist the user in the detection and correction of
          units errors in the CellML Model.
        </para>
      </listitem>
    </orderedlist>
  </section>
  <section>
    <title>Type inference requirement</title>
    <orderedlist>
      <listitem>
        <para>
          In a valid model, it SHALL be possible to identify a single type for every mathematical expression or sub-expression.
        </para>
      </listitem>
      <listitem>
        <para>
          The type identified for a MathML <literal>ci</literal> element for the purposes of this section
          SHALL be the same type specified by the type attribute of the corresponding variable, or where the <literal>ci</literal> element refers to a bound variable, the type specified on <literal>ci</literal> child of the corresponding <literal>bvar</literal> element.
        </para>
      </listitem>
      <listitem>
        <para>
          The type identified for a MathML <literal>cn</literal> element for the purposes of this section
          SHALL be the same type specified by the type attribute in the CellML 1.2 namespace
          on the <literal>cn</literal> element.
        </para>
      </listitem>
      <listitem>
        <para>
          The MathML element information items <literal>true</literal> and <literal>false</literal> SHALL be identified as having type <literal>boolean</literal>.
        </para>
      </listitem>
      <listitem>
        <para>
          The MathML element information items <literal>exponentiale</literal>, <literal>pi</literal>, and <literal>eulergamma</literal> SHALL be identified as
          having type <literal>real</literal>.
        </para>
      </listitem>
      <listitem>
        <para>
          The MathML <literal>piecewise</literal> element SHALL be identified as having the type of the first case value.
          All case values in the <literal>piecewise</literal> element, and if present, the <literal>otherwise</literal> expression MUST
          also be identified as having the same type. The case conditions MUST be identified as having
          type <literal>boolean</literal>.
        </para>
      </listitem>
      <listitem>
        <para>
          The type identification for all remaining MathML element information items, including for
          the <literal>apply</literal> element information item with different operators, are left up to the secondary
          specifications.
        </para>
      </listitem>
      <listitem>
        <para>
          Secondary specifications MUST be written so that the type of any valid
          mathematical expression can be uniquely inferred from the types
          of the arguments.
        </para>
      </listitem>
    </orderedlist>
  </section>
</section>
